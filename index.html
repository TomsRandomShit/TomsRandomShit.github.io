<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roblox Lua Code Obfuscator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        textarea {
            width: 100%;
            height: 150px;
            margin-bottom: 10px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
        }
    </style>
</head>
<body>

    <h1>Roblox Lua Code Obfuscator</h1>
    <h2>Input Roblox Lua Code:</h2>
    <textarea id="inputCode" placeholder="Enter your Roblox Lua code here..."></textarea>

    <button onclick="obfuscateCode()">Obfuscate Code</button>

    <h2>Obfuscated Code:</h2>
    <textarea id="outputCode" placeholder="Obfuscated code will appear here..." readonly></textarea>

    <script>
        // Function to generate a random function name
        function generateRandomFunctionName() {
            const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let name = '';
            for (let i = 0; i < 12; i++) {
                name += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return name + 'F'; // Adding 'F' at the end for consistency with function names
        }

        // List of obfuscating functions with placeholder names
        const obfuscatingFunctions = [
            "function {{RANDOM_NAME}}()\nlocal a = 0\nwhile a < 5 do a = a + 1 end\nend\n",
            "function {{RANDOM_NAME}}()\nlocal b = 10 * 3\nreturn b / 2\nend\n",
            "function {{RANDOM_NAME}}()\n-- This function does nothing\nend\n",
            "-- Random comment to confuse\n",
            "local _dummyVar = 42\n",
            "for i = 1, 10 do end\n", // Empty loop
            "function {{RANDOM_NAME}}()\nlocal a = 1\nif a == 1 then a = a + 1 end\nend\n",
            "function {{RANDOM_NAME}}()\nlocal x = 'hidden'\nreturn x\nend\n",
            "-- Misleading comment: TODO: Optimize this\n",
            "function {{RANDOM_NAME}}()\nreturn math.random(1, 100)\nend\n"
        ];

        // Function to replace placeholder {{RANDOM_NAME}} with actual random names
        function replaceFunctionNames(code) {
            return code.replace(/{{RANDOM_NAME}}/g, generateRandomFunctionName());
        }

        // Function to get a random obfuscation snippet
        function getRandomObfuscation() {
            const randomIndex = Math.floor(Math.random() * obfuscatingFunctions.length);
            let obfuscationCode = obfuscatingFunctions[randomIndex];
            return replaceFunctionNames(obfuscationCode);
        }

        // Function to obfuscate the user's code and ensure at least 5 obfuscations
        function obfuscateCode() {
            const inputCode = document.getElementById('inputCode').value;
            
            // Split the input code into lines
            let codeLines = inputCode.split('\n');
            
            // Create a new array to hold the obfuscated code
            let obfuscatedCode = [];
            
            // Minimum number of obfuscations we want to insert
            let minObfuscations = 5;
            let currentObfuscations = 0;

            // Loop through each line of the user's code
            for (let i = 0; i < codeLines.length; i++) {
                // Add the original line of code
                obfuscatedCode.push(codeLines[i]);

                // Randomly decide whether to inject an obfuscation snippet after this line
                if (Math.random() < 0.5 && currentObfuscations < minObfuscations) {
                    obfuscatedCode.push(getRandomObfuscation());
                    currentObfuscations++;
                }

                // Ensure we add at least 5 obfuscations by forcing them if not enough have been added
                if (i === codeLines.length - 1 && currentObfuscations < minObfuscations) {
                    while (currentObfuscations < minObfuscations) {
                        obfuscatedCode.push(getRandomObfuscation());
                        currentObfuscations++;
                    }
                }
            }
            
            // Join the array back into a string and collapse it into a single line (remove new lines and extra spaces)
            const finalCode = obfuscatedCode.join(' ').replace(/\s+/g, ' ').trim();
            
            // Output the obfuscated code
            document.getElementById('outputCode').value = finalCode;
        }
    </script>

</body>
</html>
